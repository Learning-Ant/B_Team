<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.koreait.baraON.dao.MyPageDao">
	<select id="wishList" parameterType="int" resultType="com.koreait.baraON.dto.WishListDto">
		SELECT W.W_NO, C.C_NO, C.C_TITLE, C.C_CONTENT, C.C_MAINIMG
			FROM CLUB C JOIN WISHLIST W
		  ON C.C_NO = W.C_NO
		 WHERE W.M_NO = #{param1}
		 AND C.C_DELETE = 0
	</select>
	<delete id="wishDelete" parameterType="int">
		DELETE 
			FROM WISHLIST
		 WHERE W_NO = #{param1}
	</delete>
	<select id="clubList" parameterType="int" resultType="com.koreait.baraON.dto.ClubListDto">
		SELECT C.C_MAINIMG, C.C_TITLE, C.C_CONTENT, C.C_STARTDATE, CL.CL_CARD, M.M_NICK
			FROM CLUBLIST CL JOIN CLUB C ON CL.C_NO = C.C_NO
				JOIN MEMBER M ON M.M_NO = C.M_NO
			WHERE CL.M_NO = #{param1}
	 		AND C.C_PART = #{param2}
	 		AND TO_CHAR(C.C_ENDDATE, 'YYYY-MM-DD') >= TO_CHAR(SYSDATE, 'YYYY-MM-DD')
	 		AND C.C_DELETE = 0
	</select>
	<select id="lastClubList" parameterType="int" resultType="com.koreait.baraON.dto.ClubListDto">
		SELECT C.C_MAINIMG, C.C_TITLE, C.C_CONTENT, C.C_STARTDATE, CL.CL_CARD, M.M_NICK
			FROM CLUBLIST CL JOIN CLUB C ON CL.C_NO = C.C_NO
				JOIN MEMBER M ON M.M_NO = C.M_NO
			WHERE CL.M_NO = #{param1}
	 		AND C.C_PART = #{param2}
	 		AND TO_CHAR(C.C_ENDDATE, 'YYYY-MM-DD') &lt; TO_CHAR(SYSDATE, 'YYYY-MM-DD')
	 		AND C.C_DELETE = 0
	</select>
	<delete id="clubListDelete" parameterType="int">
		DELETE
			FROM CLUBLIST
		 WHERE CL_NO = #{param1}
	</delete>
	<delete id="infoMemberDelete" parameterType="int">
		DELETE
			FROM MEMBER
		 WHERE M_NO = #{param1}
	</delete>
	<delete id="infoSellerDelete" parameterType="int">
		DELETE
			FROM SELLER
		 WHERE S_NO = #{param1}
	</delete>
</mapper>